# Chrome Safe Area Plugin

> ä¸€ä¸ªç”¨äºæ¨¡æ‹Ÿç§»åŠ¨è®¾å¤‡å®‰å…¨åŒºåŸŸæ’å…¥çš„ç°ä»£åŒ– Chrome æ‰©å±•ï¼Œä½¿ç”¨ TypeScript + WXT æ¡†æ¶æ„å»ºã€‚

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ“± è®¾å¤‡æ”¯æŒ
- **30+ ä¸»æµè®¾å¤‡**: iPhoneã€Androidã€iPad ç­‰å¤šç§è®¾å¤‡å‹å·
- **çœŸå®ç¡¬ä»¶ç‰¹å¾**: åˆ˜æµ·ã€åŠ¨æ€å²›ã€æ‰“å­”å±ã€Home æŒ‡ç¤ºå™¨ç²¾ç¡®æ¨¡æ‹Ÿ
- **ç¡¬ä»¶åŒºåŸŸæ¸²æŸ“**: æ”¯æŒå®Œæ•´çš„ç¡¬ä»¶å…ƒç´ å±•ç¤ºï¼ˆçŠ¶æ€æ ã€ç›¸æœºä¼ æ„Ÿå™¨ç­‰ï¼‰
- **è‡ªå®šä¹‰é…ç½®**: æ”¯æŒè‡ªå®šä¹‰å®‰å…¨è¾¹è·å€¼

### ğŸ¨ è§†è§‰æ•ˆæœ
- **çœŸå®è®¾å¤‡å¤–è§‚**: ç²¾ç¡®è¿˜åŸå„å“ç‰Œè®¾å¤‡çš„å¤–è§‚å’Œé¢œè‰²
- **å¯è§†åŒ–æ§åˆ¶**: å®æ—¶åˆ‡æ¢å®‰å…¨è¾¹è·å’Œå†…å®¹æ˜¾ç¤ºåŒºåŸŸ
- **è°ƒè¯•å åŠ å±‚**: ç›´è§‚çš„å®‰å…¨è¾¹è·å¯è§†åŒ–
- **æ¨ªç«–å±æ”¯æŒ**: å®Œæ•´çš„è®¾å¤‡æ–¹å‘æ¨¡æ‹Ÿ

### ğŸ’» å¼€å‘ä½“éªŒ
- **TypeScript æ”¯æŒ**: å®Œæ•´çš„ç±»å‹å®‰å…¨å’Œå¼€å‘ä½“éªŒ
- **WXT æ¡†æ¶**: ç°ä»£åŒ–çš„ Web æ‰©å±•å¼€å‘æ¡†æ¶
- **çƒ­é‡è½½**: å¼€å‘æ¨¡å¼ä¸‹çš„å®æ—¶é‡è½½
- **SPA è·¯ç”±æ£€æµ‹**: è‡ªåŠ¨æ£€æµ‹å•é¡µåº”ç”¨è·¯ç”±å˜åŒ–

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- Node.js 16+
- npm æˆ– pnpm
- Chrome æµè§ˆå™¨

### å®‰è£…å’Œæ„å»º

```bash
# å…‹éš†é¡¹ç›®
git clone https://github.com/username/chrome-safe-area-plugin.git
cd chrome-safe-area-plugin

# å®‰è£…ä¾èµ–
npm install

# å¼€å‘æ¨¡å¼ï¼ˆå¸¦çƒ­é‡è½½ï¼‰
npm run dev

# ç”Ÿäº§æ„å»º
npm run build

# æ„å»ºå¹¶æ‰“åŒ…ï¼ˆç”¨äº Chrome Web Store å‘å¸ƒï¼‰
npm run build:zip
```

### åŠ è½½åˆ° Chrome

1. æ‰“å¼€ Chrome æµè§ˆå™¨ï¼Œè®¿é—® `chrome://extensions/`
2. å¯ç”¨"å¼€å‘è€…æ¨¡å¼"
3. ç‚¹å‡»"åŠ è½½å·²è§£å‹çš„æ‰©å±•ç¨‹åº"
4. é€‰æ‹©é¡¹ç›®ä¸­çš„ `.output/chrome-mv3` æ–‡ä»¶å¤¹

## ğŸ”§ å¼€å‘

### å¼€å‘å‘½ä»¤

```bash
# å¼€å‘æ¨¡å¼ï¼ˆWXT çƒ­é‡è½½ï¼‰
npm run dev

# å¿«é€Ÿæ„å»ºï¼ˆå•æ¬¡æ„å»ºï¼‰
npm run dev:fast

# ç”Ÿäº§æ„å»º
npm run build

# ç±»å‹æ£€æŸ¥
npm run type-check

# ä»£ç æ£€æŸ¥
npm run lint

# ä¿®å¤ä»£ç é—®é¢˜
npm run lint:fix

# å®Œæ•´éªŒè¯ï¼ˆç±»å‹æ£€æŸ¥ + ä»£ç æ£€æŸ¥ + æµ‹è¯•ï¼‰
npm run validate

# æ¸…ç†æ„å»º
npm run clean

# è¿è¡Œæµ‹è¯•
npm test

# ç”Ÿæˆå›¾æ ‡
npm run generate-icons
```

### é¡¹ç›®ç»“æ„

```
chrome-safe-area-plugin/
â”œâ”€â”€ entrypoints/              # WXT å…¥å£ç‚¹
â”‚   â”œâ”€â”€ background.ts         # åå°è„šæœ¬
â”‚   â”œâ”€â”€ content.ts           # å†…å®¹è„šæœ¬
â”‚   â””â”€â”€ popup/               # å¼¹çª—ç•Œé¢
â”‚       â”œâ”€â”€ index.html
â”‚       â”œâ”€â”€ main.ts
â”‚       â””â”€â”€ style.css
â”œâ”€â”€ src/                     # æºä»£ç 
â”‚   â”œâ”€â”€ shared/              # å…±äº«æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ devices.ts       # è®¾å¤‡æ•°æ®åº“
â”‚   â”‚   â””â”€â”€ utils.ts         # å·¥å…·å‡½æ•°
â”‚   â”œâ”€â”€ hardware-renderer.ts # ç¡¬ä»¶åŒºåŸŸæ¸²æŸ“å™¨
â”‚   â”œâ”€â”€ phone-frame-simple.ts # è®¾å¤‡æ¡†æ¶ç»„ä»¶
â”‚   â””â”€â”€ phone-mockup.ts      # è®¾å¤‡é¢„è§ˆç»„ä»¶
â”œâ”€â”€ icons/                   # æ‰©å±•å›¾æ ‡
â”œâ”€â”€ .output/                 # WXT æ„å»ºè¾“å‡º
â”œâ”€â”€ tests/                   # å•å…ƒæµ‹è¯•
â”œâ”€â”€ types/                   # TypeScript ç±»å‹å®šä¹‰
â”œâ”€â”€ wxt.config.ts           # WXT é…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScript é…ç½®
â””â”€â”€ vitest.config.ts        # æµ‹è¯•é…ç½®
```

## ğŸ¯ ä½¿ç”¨æ–¹æ³•

1. **å¯åŠ¨æ‰©å±•**: ç‚¹å‡»æµè§ˆå™¨å·¥å…·æ ä¸­çš„æ‰©å±•å›¾æ ‡
2. **é€‰æ‹©è®¾å¤‡**: ä»ä¸‹æ‹‰èœå•é€‰æ‹©è¦æ¨¡æ‹Ÿçš„è®¾å¤‡
3. **å¯ç”¨æ¨¡æ‹Ÿ**: åˆ‡æ¢å¼€å…³å¯ç”¨å®‰å…¨è¾¹è·æ¨¡æ‹Ÿ
4. **è°ƒè¯•æ¨¡å¼**: ç‚¹å‡»è®¾ç½®æŒ‰é’®å¯ç”¨ç¡¬ä»¶åŒºåŸŸå¯è§†åŒ–
5. **æŸ¥çœ‹æ•ˆæœ**: é¡µé¢å°†æ˜¾ç¤ºå¯¹åº”çš„å®‰å…¨è¾¹è·å’Œç¡¬ä»¶åŒºåŸŸæ•ˆæœ

### æ”¯æŒçš„è®¾å¤‡

#### iPhone ç³»åˆ—
- iPhone 15 Pro Max/Pro/Plus/15 (åŠ¨æ€å²›)
- iPhone 14 Pro Max/Pro/Plus/14 (åŠ¨æ€å²›/åˆ˜æµ·)
- iPhone 13 Pro Max/Pro/mini/13 (åˆ˜æµ·)
- iPhone 12 Pro Max/Pro/mini/12 (åˆ˜æµ·)
- iPhone 11 Pro Max/Pro/11 (åˆ˜æµ·)
- iPhone XS Max/XS/XR/X (åˆ˜æµ·)

#### Android ç³»åˆ—
- Google Pixel 7 Pro/7/6 Pro/6 (æ‰“å­”å±)
- Samsung Galaxy S23 Ultra/S23/S22 Ultra/S22/S21 ç³»åˆ— (æ‰“å­”å±)
- OnePlus 9 Pro/9 (æ‰“å­”å±)

#### å¹³æ¿è®¾å¤‡
- iPad Pro 12.9"/11" (åœ†è§’å±å¹•)
- iPad Air (åœ†è§’å±å¹•)

### CSS å˜é‡

æ‰©å±•ä¼šè‡ªåŠ¨æ³¨å…¥ä»¥ä¸‹ CSS å˜é‡åˆ°é¡µé¢ä¸­ï¼š

```css
:root {
  --safe-area-inset-top: 44px;
  --safe-area-inset-bottom: 34px;
  --safe-area-inset-left: 0px;
  --safe-area-inset-right: 0px;
}
```

åœ¨ä½ çš„ CSS ä¸­ä½¿ç”¨ï¼š

```css
.app-header {
  padding-top: var(--safe-area-inset-top);
}

.app-content {
  padding-left: var(--safe-area-inset-left);
  padding-right: var(--safe-area-inset-right);
}

.app-footer {
  padding-bottom: var(--safe-area-inset-bottom);
}
```

## ğŸ› ï¸ æŠ€æœ¯æ¶æ„

### æ ¸å¿ƒæŠ€æœ¯æ ˆ
- **WXT**: ç°ä»£åŒ–çš„ Web æ‰©å±•å¼€å‘æ¡†æ¶
- **TypeScript**: ç±»å‹å®‰å…¨çš„ JavaScript è¶…é›†
- **Vite**: é«˜æ€§èƒ½æ„å»ºå·¥å…·
- **Vitest**: ç°ä»£åŒ–çš„æµ‹è¯•æ¡†æ¶
- **ESLint**: ä»£ç è´¨é‡æ£€æŸ¥

### ä¸»è¦ç»„ä»¶
- **SafeAreaInjector**: CSS æ³¨å…¥å’Œ SPA è·¯ç”±æ£€æµ‹
- **HardwareRegionsRenderer**: ç¡¬ä»¶åŒºåŸŸå¯è§†åŒ–æ¸²æŸ“
- **PhoneFrameSimple**: è®¾å¤‡æ¡†æ¶å åŠ ç³»ç»Ÿ
- **PhoneMockup**: å¼¹çª—ä¸­çš„è®¾å¤‡é¢„è§ˆ

### WXT æ¡†æ¶ä¼˜åŠ¿
- **æ–‡ä»¶åŸºç¡€è·¯ç”±**: è‡ªåŠ¨è¯†åˆ«å…¥å£ç‚¹
- **çƒ­é‡è½½å¼€å‘**: ä¿®æ”¹ä»£ç è‡ªåŠ¨é‡æ–°åŠ è½½æ‰©å±•
- **TypeScript é›†æˆ**: å®Œæ•´çš„ç±»å‹æ”¯æŒ
- **å¤šæµè§ˆå™¨æ”¯æŒ**: æ”¯æŒ Chromeã€Firefoxã€Safari

## ğŸ§ª æµ‹è¯•

```bash
# è¿è¡Œæµ‹è¯•ï¼ˆç›‘å¬æ¨¡å¼ï¼‰
npm test

# è¿è¡Œæµ‹è¯•ï¼ˆå•æ¬¡ï¼‰
npm run test:run

# æµ‹è¯•è¦†ç›–ç‡
npm run test:coverage

# æµ‹è¯• UI
npm run test:ui
```

é¡¹ç›®åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•å¥—ä»¶ï¼Œè¦†ç›–ï¼š
- è®¾å¤‡é…ç½®éªŒè¯
- å†…å®¹è„šæœ¬åŠŸèƒ½
- åå°è„šæœ¬é€»è¾‘
- UI ç»„ä»¶æ¸²æŸ“

## ğŸš€ å‘å¸ƒ

### åˆ›å»ºå‘å¸ƒåŒ…

```bash
# æ„å»ºå¹¶æ‰“åŒ…
npm run build:zip

# æ‰‹åŠ¨æ‰“åŒ…å·²æœ‰æ„å»º
npm run package
```

ç”Ÿæˆçš„ ZIP åŒ…ä½äº `packages/` ç›®å½•ï¼Œå¯ç›´æ¥ä¸Šä¼ åˆ° Chrome Web Storeã€‚

### æ–‡ä»¶å‘½åè§„åˆ™
- æ ¼å¼ï¼š`chrome-safe-area-plugin-v{version}-{timestamp}.zip`
- åŒ…å«ç‰ˆæœ¬å·å’Œæ„å»ºæ—¶é—´æˆ³
- æ”¯æŒæœ€å¤§å‹ç¼©ä¼˜åŒ–

## ğŸ“š å¼€å‘æŒ‡å—

### æ·»åŠ æ–°è®¾å¤‡

1. åœ¨ `src/shared/devices.ts` ä¸­æ·»åŠ è®¾å¤‡é…ç½®ï¼š

```typescript
{
  name: "iPhone 16 Pro",
  brand: "Apple",
  safeAreaInsets: {
    top: 59,
    bottom: 34,
    left: 0,
    right: 0
  },
  appearance: {
    // è®¾å¤‡å¤–è§‚é…ç½®
  },
  hardwareRegions: {
    // ç¡¬ä»¶åŒºåŸŸé…ç½®
  }
}
```

2. æµ‹è¯•æ–°è®¾å¤‡é…ç½®
3. è¿è¡Œ `npm run validate` ç¡®ä¿ä»£ç è´¨é‡

### è‡ªå®šä¹‰ç¡¬ä»¶åŒºåŸŸ

ç¡¬ä»¶åŒºåŸŸæ”¯æŒå¤šç§ç±»å‹ï¼š
- `dynamic-island`: åŠ¨æ€å²›
- `notch`: ä¼ ç»Ÿåˆ˜æµ·
- `punch-hole`: æ‰“å­”å±
- `status-bar`: çŠ¶æ€æ 
- `home-indicator`: Home æŒ‡ç¤ºå™¨

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤ Issue å’Œ Pull Requestï¼

### å¼€å‘æµç¨‹
1. Fork é¡¹ç›®
2. åˆ›å»ºåŠŸèƒ½åˆ†æ”¯
3. æäº¤ä»£ç å¹¶é€šè¿‡ `npm run validate`
4. åˆ›å»º Pull Request

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](./LICENSE) æ–‡ä»¶

---

**ğŸ‰ äº«å—ä½¿ç”¨ Chrome Safe Area Plugin è¿›è¡Œç§»åŠ¨ç«¯å¼€å‘ï¼** 